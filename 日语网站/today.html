<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ä»Šæ—¥å­¦ä¹  - Animeæ—¥è¯­æ¯æ—¥è¯¾</title>
    <link rel="stylesheet" href="styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans:wght@400;700&family=Noto+Sans+JP:wght@400;700&family=Noto+Sans+SC:wght@400;700&family=Noto+Serif:wght@400;700&family=Noto+Serif+JP:wght@400;700&family=Noto+Serif+SC:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
</head>
<body>
    <div class="app">
        <!-- å¯¼èˆªæ  -->
        <nav class="navbar">
            <div class="navbar-logo">
                <img src="images/logo.png" alt="Animeæ—¥è¯­æ¯æ—¥è¯¾">
                <h1>Animeæ—¥è¯­æ¯æ—¥è¯¾</h1>
            </div>
            <div class="navbar-links">
                <a href="index.html" class="navbar-link">é¦–é¡µ</a>
                <a href="today.html" class="navbar-link active">ä»Šæ—¥å­¦ä¹ </a>
                <a href="vocabulary.html" class="navbar-link">æˆ‘çš„è¯åº“</a>
                <a href="reports.html" class="navbar-link">å­¦ä¹ æŠ¥å‘Š</a>
                <a href="settings.html" class="navbar-link">è®¾ç½®</a>
                <a href="help.html" class="navbar-link">å¸®åŠ©</a>
            </div>
            <div class="navbar-user">
                <img src="images/avatar.png" alt="ç”¨æˆ·å¤´åƒ">
                <span>ç”¨æˆ·å</span>
            </div>
            <button class="mobile-menu-toggle">
                <i class="fas fa-bars"></i>
            </button>
        </nav>

        <!-- ä¸»å†…å®¹ -->
        <main class="main-content">
            <div class="today-learning container">
                <h1 class="mb-3">ä»Šæ—¥å­¦ä¹ </h1>
                
                <!-- è§†é¢‘æ’­æ”¾åŒºåŸŸ -->
                <div class="video-container">
                    <video class="video-player" id="video-player" controls poster="images/video-thumbnail.jpg">
                        <source src="media/sample-clip.mp4" type="video/mp4">
                        æ‚¨çš„æµè§ˆå™¨ä¸æ”¯æŒè§†é¢‘æ’­æ”¾ã€‚
                    </video>
                    
                    <!-- å¼¹å¹•å®¹å™¨ -->
                    <div id="danmaku-container" class="danmaku-container"></div>
                </div>
                
                <!-- å­—å¹•åŒºåŸŸ -->
                <div class="subtitle-container">
                    <div class="subtitle-jp" id="subtitle-jp">ç§ã¯æ¯æ—¥å­¦æ ¡ã«è¡Œãã¾ã™ã€‚å‹é”ã¨ä¸€ç·’ã«å‹‰å¼·ã•ã‚Œã¦ã„ã¾ã™ã€‚</div>
                    <div class="subtitle-cn" id="subtitle-cn">æˆ‘æ¯å¤©å»å­¦æ ¡ã€‚å’Œæœ‹å‹ä¸€èµ·å­¦ä¹ ã€‚</div>
                </div>
                
                <!-- è§†é¢‘æ§åˆ¶åŒºåŸŸ -->
                <div class="video-controls">
                    <button class="btn-primary" id="jp-subtitle-btn">æ—¥è¯­å­—å¹•</button>
                    <button class="btn-primary" id="cn-subtitle-btn">ä¸­æ–‡å­—å¹•</button>
                    <button class="btn-primary" id="dual-subtitle-btn">åŒè¯­å­—å¹•</button>
                    <button class="btn-primary" id="no-subtitle-btn">å…³é—­å­—å¹•</button>
                    <button class="btn-secondary" id="danmaku-toggle">å…³é—­å¼¹å¹•</button>
                    <button class="btn-secondary" id="danmaku-settings">å¼¹å¹•è®¾ç½®</button>
                </div>
                
                <!-- å¯¼å­¦å†…å®¹ -->
                <div class="learning-guide">
                    <h3>ä»Šæ—¥é‡ç‚¹ï¼šæŒæ¡"ã€œã•ã‚Œã‚‹"çš„ä¸¤ç§ç”¨æ³•</h3>
                    <p>åœ¨ä»Šå¤©çš„ç‰‡æ®µä¸­ï¼Œæˆ‘ä»¬å°†å­¦ä¹ æ—¥è¯­è¢«åŠ¨å½¢"ã€œã•ã‚Œã‚‹"çš„ä¸¤ç§å¸¸è§ç”¨æ³•ï¼š</p>
                    <ol>
                        <li>è¡¨ç¤ºè¢«åŠ¨ä½œï¼šæŸäººè¢«ä»–äººåšæŸäº‹</li>
                        <li>è¡¨ç¤ºè‡ªå‘ï¼šæŸäº‹è‡ªç„¶è€Œç„¶åœ°å‘ç”Ÿ</li>
                    </ol>
                    <p>è¯·æ³¨æ„ç‰‡æ®µä¸­"å‹‰å¼·ã•ã‚Œã¦ã„ã¾ã™"çš„ç”¨æ³•ï¼Œä½“ä¼šè¢«åŠ¨å½¢çš„è¯­æ„Ÿã€‚</p>
                </div>
                
                <!-- äº’åŠ¨å·¥å…·åŒºåŸŸ -->
                <h2 class="mt-4 mb-3">äº’åŠ¨å­¦ä¹ å·¥å…·</h2>
                <div class="interactive-tools">
                    <!-- æ…¢é€Ÿå¤è¯» -->
                    <div class="tool-card" id="slow-replay-tool">
                        <div class="tool-icon">
                            <i class="fas fa-volume-down"></i>
                        </div>
                        <h3>æ…¢é€Ÿå¤è¯»</h3>
                        <p>ç”Ÿæˆè§’è‰²å°è¯çš„æ…¢é€Ÿç‰ˆéŸ³é¢‘ï¼Œä¿æŒåŸå£°æƒ…æ„Ÿ</p>
                    </div>
                    
                    <!-- è·Ÿè¯»æ‰“åˆ† -->
                    <div class="tool-card" id="pronunciation-tool">
                        <div class="tool-icon">
                            <i class="fas fa-microphone"></i>
                        </div>
                        <h3>è·Ÿè¯»æ‰“åˆ†</h3>
                        <p>å½•éŸ³è·Ÿè¯»ï¼ŒAIè¯„ä¼°æ‚¨çš„å‘éŸ³å‡†ç¡®åº¦</p>
                    </div>
                    
                    <!-- è¶£å‘³å¡«ç©º -->
                    <div class="tool-card" id="gap-filling-tool">
                        <div class="tool-icon">
                            <i class="fas fa-puzzle-piece"></i>
                        </div>
                        <h3>è¶£å‘³å¡«ç©º</h3>
                        <p>é€šè¿‡å¡«ç©ºæ¸¸æˆå·©å›ºæ‰€å­¦å†…å®¹</p>
                    </div>
                    
                    <!-- å¿«æ·é”®å¸®åŠ© -->
                    <div class="tool-card" id="shortcut-help-tool">
                        <div class="tool-icon">
                            <i class="fas fa-keyboard"></i>
                        </div>
                        <h3>å¿«æ·é”®å¸®åŠ©</h3>
                        <p>æŸ¥çœ‹é”®ç›˜å¿«æ·é”®åˆ—è¡¨ï¼Œæé«˜æ“ä½œæ•ˆç‡</p>
                    </div>
                </div>
                
                <!-- å¡«ç©ºæ¸¸æˆåŒºåŸŸï¼ˆé»˜è®¤éšè—ï¼‰ -->
                <div id="gap-filling-game" class="gap-filling-game" style="display: none;">
                    <h3 class="mb-3">è¶£å‘³å¡«ç©ºæ¸¸æˆ</h3>
                    <div class="game-question">
                        ç§ã¯æ¯æ—¥<span class="gap">_____</span>ã«è¡Œãã¾ã™ã€‚å‹é”ã¨ä¸€ç·’ã«<span class="gap">_____</span>ã•ã‚Œã¦ã„ã¾ã™ã€‚
                    </div>
                    <div class="game-options">
                        <div class="game-option" data-value="å­¦æ ¡">å­¦æ ¡</div>
                        <div class="game-option" data-value="æ•™å®¤">æ•™å®¤</div>
                        <div class="game-option" data-value="å¤§å­¦">å¤§å­¦</div>
                        <div class="game-option" data-value="å›³æ›¸é¤¨">å›³æ›¸é¤¨</div>
                    </div>
                    <div class="game-options">
                        <div class="game-option" data-value="å‹‰å¼·">å‹‰å¼·</div>
                        <div class="game-option" data-value="éŠã³">éŠã³</div>
                        <div class="game-option" data-value="é£Ÿã¹">é£Ÿã¹</div>
                        <div class="game-option" data-value="è©±ã—">è©±ã—</div>
                    </div>
                    <div class="d-flex justify-between mt-3">
                        <button class="btn-primary" id="check-answer-btn">æ£€æŸ¥ç­”æ¡ˆ</button>
                        <button class="btn-secondary" id="reset-game-btn">é‡æ–°å¼€å§‹</button>
                        <button class="btn-accent" id="close-game-btn">å…³é—­æ¸¸æˆ</button>
                    </div>
                </div>
                
                <!-- æ…¢é€Ÿå¤è¯»é¢æ¿ï¼ˆé»˜è®¤éšè—ï¼‰ -->
                <div id="slow-replay-panel" class="bg-white rounded shadow p-3 mt-3" style="display: none;">
                    <h3 class="mb-2">æ…¢é€Ÿå¤è¯»</h3>
                    <div class="d-flex justify-between align-center mb-2">
                        <div>
                            <label for="speed-slider">é€Ÿåº¦ï¼š</label>
                            <span id="speed-value">0.7x</span>
                        </div>
                        <input type="range" id="speed-slider" min="0.5" max="0.9" step="0.1" value="0.7" style="width: 200px;">
                    </div>
                    <div class="d-flex gap-2">
                        <button class="btn-primary" id="play-slow-btn">
                            <i class="fas fa-play mr-1"></i> æ’­æ”¾æ…¢é€Ÿç‰ˆ
                        </button>
                        <button class="btn-secondary" id="play-original-btn">
                            <i class="fas fa-play mr-1"></i> æ’­æ”¾åŸé€Ÿç‰ˆ
                        </button>
                        <button class="btn-accent" id="close-replay-btn">å…³é—­</button>
                    </div>
                </div>
                
                <!-- è·Ÿè¯»æ‰“åˆ†é¢æ¿ï¼ˆé»˜è®¤éšè—ï¼‰ -->
                <div id="pronunciation-panel" class="bg-white rounded shadow p-3 mt-3" style="display: none;">
                    <h3 class="mb-2">è·Ÿè¯»æ‰“åˆ†</h3>
                    <p class="mb-2">è¯·è·Ÿè¯»ä»¥ä¸‹å¥å­ï¼š</p>
                    <div class="bg-primary text-white p-2 rounded mb-2 font-jp">
                        ç§ã¯æ¯æ—¥å­¦æ ¡ã«è¡Œãã¾ã™ã€‚å‹é”ã¨ä¸€ç·’ã«å‹‰å¼·ã•ã‚Œã¦ã„ã¾ã™ã€‚
                    </div>
                    <div class="d-flex gap-2 mb-2">
                        <button class="btn-primary" id="listen-btn">
                            <i class="fas fa-volume-up mr-1"></i> å¬åŸå£°
                        </button>
                        <button class="btn-secondary" id="record-btn">
                            <i class="fas fa-microphone mr-1"></i> å¼€å§‹å½•éŸ³
                        </button>
                        <button class="btn-accent" id="close-pronunciation-btn">å…³é—­</button>
                    </div>
                    <div id="recording-status" class="text-center p-2" style="display: none;">
                        <div class="spinner"></div>
                        <p>æ­£åœ¨å½•éŸ³...</p>
                    </div>
                    <div id="score-result" class="text-center p-2" style="display: none;">
                        <div class="score-emoji" style="font-size: 3rem;">ğŸ˜Š</div>
                        <p class="score-text">å‘éŸ³ä¼˜ç§€ï¼</p>
                        <div class="score-details mt-2">
                            <p>å‡†ç¡®ç‡ï¼š92%</p>
                            <p>æµåˆ©åº¦ï¼š85%</p>
                            <p>è¯­è°ƒï¼š90%</p>
                        </div>
                    </div>
                </div>
                
                <!-- å¿«æ·é”®å¸®åŠ©é¢æ¿ï¼ˆé»˜è®¤éšè—ï¼‰ -->
                <div id="shortcut-help-panel" class="bg-white rounded shadow p-3 mt-3" style="display: none;">
                    <h3 class="mb-2">é”®ç›˜å¿«æ·é”®</h3>
                    <div class="shortcut-help">
                        <div class="shortcut-key">ç©ºæ ¼</div>
                        <div>æ’­æ”¾/æš‚åœè§†é¢‘</div>
                        
                        <div class="shortcut-key">â†</div>
                        <div>åé€€5ç§’</div>
                        
                        <div class="shortcut-key">â†’</div>
                        <div>å‰è¿›5ç§’</div>
                        
                        <div class="shortcut-key">â†‘</div>
                        <div>å¢åŠ éŸ³é‡</div>
                        
                        <div class="shortcut-key">â†“</div>
                        <div>å‡å°éŸ³é‡</div>
                        
                        <div class="shortcut-key">M</div>
                        <div>é™éŸ³/å–æ¶ˆé™éŸ³</div>
                        
                        <div class="shortcut-key">F</div>
                        <div>å…¨å±/é€€å‡ºå…¨å±</div>
                        
                        <div class="shortcut-key">S</div>
                        <div>åˆ‡æ¢å­—å¹•æ˜¾ç¤ºæ¨¡å¼</div>
                        
                        <div class="shortcut-key">J</div>
                        <div>ä»…æ˜¾ç¤ºæ—¥è¯­å­—å¹•</div>
                        
                        <div class="shortcut-key">C</div>
                        <div>ä»…æ˜¾ç¤ºä¸­æ–‡å­—å¹•</div>
                        
                        <div class="shortcut-key">D</div>
                        <div>æ˜¾ç¤ºåŒè¯­å­—å¹•</div>
                        
                        <div class="shortcut-key">R</div>
                        <div>æ…¢é€Ÿå¤è¯»</div>
                        
                        <div class="shortcut-key">P</div>
                        <div>å¼€å§‹è·Ÿè¯»ç»ƒä¹ </div>
                        
                        <div class="shortcut-key">G</div>
                        <div>å¼€å§‹å¡«ç©ºæ¸¸æˆ</div>
                        
                        <div class="shortcut-key">H</div>
                        <div>æ˜¾ç¤º/éšè—å¸®åŠ©</div>
                        
                        <div class="shortcut-key">Esc</div>
                        <div>å…³é—­æ‰€æœ‰å¼¹çª—</div>
                    </div>
                    <div class="text-center mt-3">
                        <button class="btn-accent" id="close-shortcut-btn">å…³é—­</button>
                    </div>
                </div>
                
                <!-- è¯æ±‡æç¤ºï¼ˆç¤ºä¾‹ï¼Œå®é™…ä¼šåŠ¨æ€ç”Ÿæˆï¼‰ -->
                <div class="word-tooltip" id="word-tooltip" style="display: none; top: 300px; left: 400px;">
                    <div class="word-tooltip-header">
                        <span class="word-tooltip-word">å­¦æ ¡</span>
                        <span class="word-tooltip-reading">ãŒã£ã“ã†</span>
                    </div>
                    <div class="word-tooltip-meaning">å­¦æ ¡</div>
                    <div class="word-tooltip-example">æ¯æ—¥å­¦æ ¡ã«è¡Œãã¾ã™ã€‚</div>
                    <div class="d-flex justify-between mt-2">
                        <span class="badge bg-primary text-white p-1 rounded">N5</span>
                        <button class="btn-secondary" style="padding: 2px 8px; font-size: 0.8rem;">æ”¶è—</button>
                    </div>
                </div>
            </div>
        </main>

        <!-- é¡µè„š -->
        <footer class="footer">
            <p>&copy; 2025 Animeæ—¥è¯­æ¯æ—¥è¯¾ | åŸºäºã€Šé“ƒèŠ½ä¹‹æ—…ã€‹è®¾è®¡é£æ ¼</p>
        </footer>
    </div>

    <script>
        // ç§»åŠ¨èœå•åˆ‡æ¢
        document.querySelector('.mobile-menu-toggle').addEventListener('click', function() {
            document.querySelector('.navbar-links').classList.toggle('open');
        });
        
        // å­—å¹•æ§åˆ¶
        document.getElementById('jp-subtitle-btn').addEventListener('click', function() {
            document.getElementById('subtitle-jp').style.display = 'block';
            document.getElementById('subtitle-cn').style.display = 'none';
        });
        
        document.getElementById('cn-subtitle-btn').addEventListener('click', function() {
            document.getElementById('subtitle-jp').style.display = 'none';
            document.getElementById('subtitle-cn').style.display = 'block';
        });
        
        document.getElementById('dual-subtitle-btn').addEventListener('click', function() {
            document.getElementById('subtitle-jp').style.display = 'block';
            document.getElementById('subtitle-cn').style.display = 'block';
        });
        
        document.getElementById('no-subtitle-btn').addEventListener('click', function() {
            document.getElementById('subtitle-jp').style.display = 'none';
            document.getElementById('subtitle-cn').style.display = 'none';
        });
        
        // å¼¹å¹•æ§åˆ¶
        let danmakuEnabled = true;
        document.getElementById('danmaku-toggle').addEventListener('click', function() {
            danmakuEnabled = !danmakuEnabled;
            document.getElementById('danmaku-container').style.display = danmakuEnabled ? 'block' : 'none';
            this.textContent = danmakuEnabled ? 'å…³é—­å¼¹å¹•' : 'å¼€å¯å¼¹å¹•';
        });
        
        // äº’åŠ¨å·¥å…·æ§åˆ¶
        document.getElementById('slow-replay-tool').addEventListener('click', function() {
            document.getElementById('slow-replay-panel').style.display = 'block';
            document.getElementById('pronunciation-panel').style.display = 'none';
            document.getElementById('gap-filling-game').style.display = 'none';
            document.getElementById('shortcut-help-panel').style.display = 'none';
        });
        
        document.getElementById('pronunciation-tool').addEventListener('click', function() {
            document.getElementById('slow-replay-panel').style.display = 'none';
            document.getElementById('pronunciation-panel').style.display = 'block';
            document.getElementById('gap-filling-game').style.display = 'none';
            document.getElementById('shortcut-help-panel').style.display = 'none';
        });
        
        document.getElementById('gap-filling-tool').addEventListener('click', function() {
            document.getElementById('slow-replay-panel').style.display = 'none';
            document.getElementById('pronunciation-panel').style.display = 'none';
            document.getElementById('gap-filling-game').style.display = 'block';
            document.getElementById('shortcut-help-panel').
(Content truncated due to size limit. Use line ranges to read in chunks)